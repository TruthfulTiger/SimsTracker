<check if="{{ @relationships }}">
	<true>
		<table width="100%" cellpadding="5" id="ships" class="table table-hover table-bordered">
			<thead>
			<tr>
				<th scope="col">
						<select class="custom-select" id="nhSort">
						<option value="">Neighbourhood</option>
						<repeat group="{{ @hoods }}" value="{{ @hood }}">
						<option value="{{ trim(@hood.name) }}">{{ trim(@hood.name) }}</option>
						</repeat>
						</select>
				</th>
				<th scope="col">Sim 1</th>
				<th scope="col">Sim 2</th>
				<th scope="col">Relationship</th>
				<th scope="col">Relationship flags</th>
				<th scope="col">Action</th>
			</tr>
			</thead>

			<tbody>
			<repeat group="{{ @hoods }}" value="{{ @hood }}">
				<repeat group="{{ @relationships }}" value="{{ @ship }}">
				<check if="{{ @ship.nhID == @hood.id }}">
					<tr>
						<td>{{ trim(@hood.name) }}</td>
						<repeat group="{{ @sims }}" value="{{ @sim }}">
							<check if="{{ @ship.sim1 == @sim.id}}">
								<td>{{ trim(@sim.firstName) }} {{ trim(@sim.lastName) }}</td>
							</check>
						</repeat>
						<repeat group="{{ @sims }}" value="{{ @sim }}">
							<check if="{{ @ship.sim2 == @sim.id}}">
								<td>{{ trim(@sim.firstName) }} {{ trim(@sim.lastName) }}</td>
							</check>
						</repeat>
							<td>{{ trim(@ship.relName) }}</td>
							<td>
								<check if="{{ @ship.isFamily }}">
									<img src="{{@BASE}}{{@s2path}}family.png" height="24" alt="Family">
								</check>

								<check if="{{ @ship.isSteady }}">
									<img src="{{@BASE}}{{@s2path}}steady.png" height="24" alt="Going Steady">
								</check>
								<check if="{{ @ship.isEngaged }}">
									<img src="{{@BASE}}{{@s2path}}engaged.png" height="24" alt="Engaged">
								</check>
								<check if="{{ @ship.isMarried }}">
									<img src="{{@BASE}}{{@s2path}}married.png" height="24" alt="Married / Joined">
								</check>
								<br/>
								<check if="{{ @ship.isEnemy }}">
									<img src="{{@BASE}}{{@s2path}}enemy.png" height="24" alt="Enemy">
								</check>
								<check if="{{ @ship.isFriend }}">
									<img src="{{@BASE}}{{@s2path}}friend.png" height="24" alt="Friend">
								</check>
								<check if="{{ @ship.isBF }}">
									<img src="{{@BASE}}{{@s2path}}bf.png" height="24" alt="Best Friend">
								</check>
								<check if="{{ @ship.isCrush }}">
									<img src="{{@BASE}}{{@s2path}}crush.png" height="24" alt="Crush">
								</check>
								<check if="{{ @ship.isLove }}">
									<img src="{{@BASE}}{{@s2path}}love.png" height="24" alt="Love">
								</check>
							</td>
							<td><a href="{{ @BASE.'/relationship/update/'. @ship.id }}" class="btn btn-primary"><i class="fa fa-edit" aria-hidden="true"></i> Edit</a>
								<a href="{{ @BASE.'/relationship/delete/'. @ship.id }}"
						   data-toggle="confirmation"
						   data-content="This will delete this relationship and all associated data."
						   class="btn btn-danger delete"><i class="fa fa-trash" aria-hidden="true"></i>
							Delete</a></td>
					</tr>
					</check>
				</repeat>
			</repeat>
			</tbody>
		</table>
	</true>
	<false>
		<p>No relationships found.</p>
	</false>
</check>
<a href="{{ @BASE.'/relationship/create' }}" class="btn btn-success"><i class="fa fa-plus" aria-hidden="true"></i> Create</a>

<script>
$(document).ready( function () {
    let table = $('#ships').DataTable({
        responsive: {
        breakpoints: [
            { name: 'desktop', width: Infinity },
            { name: 'tablet',  width: 1024 },
            { name: 'fablet',  width: 768 },
            { name: 'phone',   width: 480 }
        ]
    }
	});
	$('#nhSort').change(function() {
		let val = $(this).find('option:selected').val();
		console.log(val);
		table.columns(0).search(val).draw();
	});
} );
</script>